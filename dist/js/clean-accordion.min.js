"use strict";document.addEventListener("DOMContentLoaded",function(o){window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach)});
"use strict";function ownKeys(t,e){var n,o=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)),o}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var NAME="CleanAccordion",VERSION=1,CleanAccordion=function(){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,n),this.cleanAccordionGroups=e,this.cleanAccordionGroups.length<=0||(e={_name:NAME,_version:VERSION.toFixed(1),singleOpen:!0,beforeOpen:function(){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){}},this.options=_objectSpread(_objectSpread({},e),t),this.handleResize=this.debounce(this.handleResize.bind(this),100),this.init())}return _createClass(n,[{key:"init",value:function(){this.bindEvents()}},{key:"bindEvents",value:function(){var t=this;this.cleanAccordionGroups.forEach(function(e){e.addEventListener("click",function(e){t.handleAccordionClick(e)})}),window.addEventListener("resize",function(){t.handleResize()})}},{key:"handleAccordionClick",value:function(e){var t=e.target,e=t.parentNode;t.hasAttribute("data-title")&&this.openClose(e)}},{key:"handleResize",value:function(){var t=this;this.cleanAccordionGroups.forEach(function(e){e.querySelectorAll("[data-content]").forEach(function(e){t.calculateContentHeight(e)})})}},{key:"openClose",value:function(e){e.classList.contains("open")?this.close(e):this.open(e)}},{key:"calculateContentHeight",value:function(e){var t;e.parentNode.classList.contains("open")&&(t=0,Array.prototype.slice.call(e.children).forEach(function(e){t+=e.scrollHeight;e=e.children[0].currentStyle||window.getComputedStyle(e.children[0]),e=parseInt(e.marginTop.replace("px",""));t+=e}),e.style.maxHeight="".concat(t,"px"))}},{key:"resetContentHeight",value:function(e){e.style.maxHeight=""}},{key:"open",value:function(e){this.options.beforeOpen(e),this.closeAll(e);var t=e.querySelector("[data-content]");e.classList.add("open"),this.calculateContentHeight(t),this.options.afterOpen(e)}},{key:"close",value:function(e){this.options.beforeClose(e);var t=e.querySelector("[data-content]");e.classList.remove("open"),this.resetContentHeight(t),this.options.afterClose(e)}},{key:"closeAll",value:function(e){var t=this,n=e.parentNode,e=this.getDataOptions(n);if("singleOpen"in e){if(!1===e.singleOpen)return}else if(!this.options.singleOpen)return;n.querySelectorAll("[data-accordion]").forEach(function(e){t.close(e)})}},{key:"getDataOptions",value:function(e){var t={};return e.hasAttribute("data-options")&&(t=JSON.parse(e.dataset.options)),t}},{key:"debounce",value:function(o,i,r){var c;return function(){var e=this,t=arguments,n=r&&!c;clearTimeout(c),c=setTimeout(function(){c=null,r||o.apply(e,t)},i),n&&o.apply(e,t)}}}]),n}();